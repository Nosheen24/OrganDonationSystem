<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Organ Donation System dApp</title>
    <link rel="stylesheet" href="style.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  </head>

  <body>
    <nav id="header" class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">ðŸ«€ Organ Donation System</a>
        <div id="account" class="d-flex text-white"></div>
      </div>
    </nav>

    <div class="container mt-4">
      <!-- Status Display -->
      <div class="row mb-4">
        <div class="col-12">
          <div id="status" class="alert alert-info">
            Please connect your wallet to get started.
          </div>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <ul class="nav nav-tabs" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="donor-tab" data-bs-toggle="tab" data-bs-target="#donor-section" type="button" role="tab">
            Donor Management
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="recipient-tab" data-bs-toggle="tab" data-bs-target="#recipient-section" type="button" role="tab">
            Recipient Management
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="hospital-tab" data-bs-toggle="tab" data-bs-target="#hospital-section" type="button" role="tab">
            Hospital Management
          </button>
        </li>
      </ul>

      <!-- Tab Content -->
      <div class="tab-content mt-4" id="mainTabContent">
        <!-- Donor Section -->
        <div class="tab-pane fade show active" id="donor-section" role="tabpanel">
          <div class="row">
            <!-- Register Donor Form -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Register New Donor</h5>
                </div>
                <div class="card-body">
                  <form id="donorForm">
                    <div class="mb-3">
                      <label for="donorAddress" class="form-label">Donor Address</label>
                      <input type="text" class="form-control" id="donorAddress" placeholder="0x..." required>
                    </div>
                    <div class="mb-3">
                      <label for="donorName" class="form-label">Name</label>
                      <input type="text" class="form-control" id="donorName" required>
                    </div>
                    <div class="mb-3">
                      <label for="donorAge" class="form-label">Age</label>
                      <input type="number" class="form-control" id="donorAge" min="18" max="100" required>
                    </div>
                    <div class="mb-3">
                      <label for="donorBloodType" class="form-label">Blood Type</label>
                      <select class="form-control" id="donorBloodType" required>
                        <option value="">Select Blood Type</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="donorMedicalHistory" class="form-label">Medical History Hash</label>
                      <input type="text" class="form-control" id="donorMedicalHistory" placeholder="IPFS hash or medical record reference">
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Donation Preferences</label>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="donorHeart">
                        <label class="form-check-label" for="donorHeart">Heart</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="donorLiver">
                        <label class="form-check-label" for="donorLiver">Liver</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="donorKidneys">
                        <label class="form-check-label" for="donorKidneys">Kidneys</label>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Register Donor</button>
                  </form>
                </div>
              </div>
            </div>

            <!-- Donor Actions -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Donor Actions</h5>
                </div>
                <div class="card-body">
                  <!-- Get Donor Info -->
                  <div class="mb-3">
                    <label for="getDonorAddress" class="form-label">Get Donor Info</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="getDonorAddress" placeholder="Donor address">
                      <button class="btn btn-outline-secondary" type="button" id="getDonorBtn">Get Info</button>
                    </div>
                  </div>

                  <!-- Update Status (Admin) -->
                  <div class="mb-3">
                    <label for="updateDonorAddress" class="form-label">Update Donor Status (Admin Only)</label>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="updateDonorAddress" placeholder="Donor address">
                    </div>
                    <div class="input-group">
                      <select class="form-control" id="donorStatusSelect">
                        <option value="0">Active</option>
                        <option value="1">Deactivated</option>
                        <option value="2">Matched</option>
                        <option value="3">Deceased</option>
                      </select>
                      <button class="btn btn-warning" type="button" id="updateDonorStatusBtn">Update Status</button>
                    </div>
                  </div>

                  <!-- Deactivate Donor -->
                  <div class="mb-3">
                    <label for="deactivateDonorAddress" class="form-label">Deactivate Donor (Admin Only)</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="deactivateDonorAddress" placeholder="Donor address">
                      <button class="btn btn-danger" type="button" id="deactivateDonorBtn">Deactivate</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Donor Info Display -->
          <div class="row mt-4">
            <div class="col-12">
              <div id="donorInfo" class="card" style="display: none;">
                <div class="card-header">
                  <h5>Donor Information</h5>
                </div>
                <div class="card-body" id="donorInfoContent">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Recipient Section -->
        <div class="tab-pane fade" id="recipient-section" role="tabpanel">
          <div class="row">
            <!-- Register Recipient Form -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Register New Recipient</h5>
                </div>
                <div class="card-body">
                  <form id="recipientForm">
                    <div class="mb-3">
                      <label for="recipientAddress" class="form-label">Recipient Address</label>
                      <input type="text" class="form-control" id="recipientAddress" placeholder="0x..." required>
                    </div>
                    <div class="mb-3">
                      <label for="recipientName" class="form-label">Name</label>
                      <input type="text" class="form-control" id="recipientName" required>
                    </div>
                    <div class="mb-3">
                      <label for="recipientAge" class="form-label">Age</label>
                      <input type="number" class="form-control" id="recipientAge" min="1" max="120" required>
                    </div>
                    <div class="mb-3">
                      <label for="recipientBloodType" class="form-label">Blood Type</label>
                      <select class="form-control" id="recipientBloodType" required>
                        <option value="">Select Blood Type</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                      </select>
                    </div>
                    <div class="mb-3">
                      <label for="recipientMedicalHistory" class="form-label">Medical History Hash</label>
                      <input type="text" class="form-control" id="recipientMedicalHistory" placeholder="IPFS hash or medical record reference">
                    </div>
                    <div class="mb-3">
                      <label class="form-label">Location</label>
                      <div class="row">
                        <div class="col-md-6">
                          <input type="text" class="form-control mb-2" id="recipientCity" placeholder="City" required>
                        </div>
                        <div class="col-md-6">
                          <input type="text" class="form-control mb-2" id="recipientCountry" placeholder="Country" required>
                        </div>
                      </div>
                      <input type="text" class="form-control" id="recipientAdditionalInfo" placeholder="Hospital/Additional Info">
                    </div>
                    <button type="submit" class="btn btn-success">Register Recipient</button>
                  </form>
                </div>
              </div>
            </div>

            <!-- Recipient Actions -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Recipient Actions</h5>
                </div>
                <div class="card-body">
                  <!-- Get Recipient Info -->
                  <div class="mb-3">
                    <label for="getRecipientAddress" class="form-label">Get Recipient Info</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="getRecipientAddress" placeholder="Recipient address">
                      <button class="btn btn-outline-secondary" type="button" id="getRecipientBtn">Get Info</button>
                    </div>
                  </div>

                  <!-- Add to Waiting List -->
                  <div class="mb-3">
                    <label class="form-label">Add to Waiting List (Admin Only)</label>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="waitingListAddress" placeholder="Recipient address">
                    </div>
                    <div class="row mb-2">
                      <div class="col-md-6">
                        <select class="form-control" id="organTypeSelect">
                          <option value="0">Heart</option>
                          <option value="1">Liver</option>
                          <option value="2">Kidneys</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <input type="number" class="form-control" id="urgencyLevel" placeholder="Urgency Level" min="1" max="10">
                      </div>
                    </div>
                    <button class="btn btn-info" type="button" id="addToWaitingListBtn">Add to Waiting List</button>
                  </div>

                  <!-- Update Medical Status -->
                  <div class="mb-3">
                    <label for="updateRecipientAddress" class="form-label">Update Medical Status (Admin Only)</label>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="updateRecipientAddress" placeholder="Recipient address">
                    </div>
                    <div class="input-group">
                      <select class="form-control" id="medicalStatusSelect">
                        <option value="0">Waiting</option>
                        <option value="1">Transplanted</option>
                        <option value="2">Critical</option>
                        <option value="3">Stable</option>
                        <option value="4">Rejected</option>
                      </select>
                      <button class="btn btn-warning" type="button" id="updateMedicalStatusBtn">Update Status</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recipient Info Display -->
          <div class="row mt-4">
            <div class="col-12">
              <div id="recipientInfo" class="card" style="display: none;">
                <div class="card-header">
                  <h5>Recipient Information</h5>
                </div>
                <div class="card-body" id="recipientInfoContent">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Hospital Section -->
        <div class="tab-pane fade" id="hospital-section" role="tabpanel">
          <div class="row">
            <!-- Register Hospital Form -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Register New Hospital (Owner Only)</h5>
                </div>
                <div class="card-body">
                  <form id="hospitalForm">
                    <div class="mb-3">
                      <label for="hospitalAddress" class="form-label">Hospital Address</label>
                      <input type="text" class="form-control" id="hospitalAddress" placeholder="0x..." required>
                    </div>
                    <div class="mb-3">
                      <label for="hospitalName" class="form-label">Hospital Name</label>
                      <input type="text" class="form-control" id="hospitalName" required>
                    </div>
                    <div class="mb-3">
                      <label for="hospitalLocation" class="form-label">Location</label>
                      <input type="text" class="form-control" id="hospitalLocation" placeholder="City, Country" required>
                    </div>
                    <div class="mb-3">
                      <label for="hospitalLicenseId" class="form-label">License ID</label>
                      <input type="text" class="form-control" id="hospitalLicenseId" placeholder="License/Registration Number" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Register Hospital</button>
                  </form>
                </div>
              </div>
            </div>

            <!-- Hospital Actions -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Hospital Actions</h5>
                </div>
                <div class="card-body">
                  <!-- Get Hospital Info -->
                  <div class="mb-3">
                    <label for="getHospitalAddress" class="form-label">Get Hospital Info</label>
                    <div class="input-group">
                      <input type="text" class="form-control" id="getHospitalAddress" placeholder="Hospital address">
                      <button class="btn btn-outline-secondary" type="button" id="getHospitalBtn">Get Info</button>
                    </div>
                  </div>

                  <!-- Verify Hospital -->
                  <div class="mb-3">
                    <label for="verifyHospitalAddress" class="form-label">Verify Hospital (Owner Only)</label>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="verifyHospitalAddress" placeholder="Hospital address">
                    </div>
                    <div class="input-group">
                      <input type="text" class="form-control" id="hospitalCredentials" placeholder="Credentials (will be hashed)">
                      <button class="btn btn-success" type="button" id="verifyHospitalBtn">Verify</button>
                    </div>
                  </div>

                  <!-- Authorize Staff -->
                  <div class="mb-3">
                    <label class="form-label">Authorize Staff (Hospital Admin Only)</label>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="staffHospitalAddress" placeholder="Hospital address">
                    </div>
                    <div class="input-group mb-2">
                      <input type="text" class="form-control" id="staffAddress" placeholder="Staff address">
                    </div>
                    <div class="input-group">
                      <select class="form-control" id="staffRoleSelect">
                        <option value="0">Admin</option>
                        <option value="1">Surgeon</option>
                        <option value="2">Coordinator</option>
                        <option value="3">None (Remove)</option>
                      </select>
                      <button class="btn btn-info" type="button" id="authorizeStaffBtn">Authorize</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Hospital Capacity Management -->
          <div class="row mt-4">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Update Hospital Capacity</h5>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label for="capacityHospitalAddress" class="form-label">Hospital Address</label>
                    <input type="text" class="form-control" id="capacityHospitalAddress" placeholder="Hospital address">
                  </div>
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <label for="capacityOrganType" class="form-label">Organ Type</label>
                      <select class="form-control" id="capacityOrganType">
                        <option value="0">Heart</option>
                        <option value="1">Liver</option>
                        <option value="2">Kidneys</option>
                      </select>
                    </div>
                    <div class="col-md-6">
                      <label for="capacityAmount" class="form-label">Capacity</label>
                      <input type="number" class="form-control" id="capacityAmount" placeholder="Number" min="0">
                    </div>
                  </div>
                  <button class="btn btn-warning" type="button" id="updateCapacityBtn">Update Capacity</button>
                </div>
              </div>
            </div>

            <!-- Get Staff Role -->
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <h5>Check Staff Role</h5>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <label for="roleHospitalAddress" class="form-label">Hospital Address</label>
                    <input type="text" class="form-control" id="roleHospitalAddress" placeholder="Hospital address">
                  </div>
                  <div class="mb-3">
                    <label for="roleStaffAddress" class="form-label">Staff Address</label>
                    <input type="text" class="form-control" id="roleStaffAddress" placeholder="Staff address">
                  </div>
                  <button class="btn btn-outline-secondary" type="button" id="getStaffRoleBtn">Get Role</button>
                  <div id="staffRoleResult" class="mt-3" style="display: none;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Hospital Info Display -->
          <div class="row mt-4">
            <div class="col-12">
              <div id="hospitalInfo" class="card" style="display: none;">
                <div class="card-header">
                  <h5>Hospital Information</h5>
                </div>
                <div class="card-body" id="hospitalInfoContent">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="index.js"></script>
  </body>
</html>